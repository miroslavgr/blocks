"use strict";(function(){jQuery(function(i){var _=function(s){var o,t,e;return 0===i("p.applying-costs-result .progress").length&&i("p.applying-costs-result").append(' <span class="progress"></span>'),t='<span class="error"   style="color: #DC3232;">&#10005;</span> '+wc_cog_admin.i18n.apply_costs_error,e='<span class="success" style="color: #008000;">&#10004;</span> '+wc_cog_admin.i18n.apply_costs_success,o={action:"wc_cog_get_applying_costs_status",security:wc_cog_admin.get_applying_cost_of_goods_status_nonce,job_id:s},i.post(ajaxurl,o).done(function(s){if(s.success){if("completed"!==s.data.status)return i("p.applying-costs-result .progress").html(s.data.progress+" / "+s.data.total),setTimeout(_(s.data.id),1e5);i("p.applying-costs-result").html(e)}else i("p.applying-costs-result").html(t),console.log(s.data);return i("span.applying-costs-progress").removeClass("is-active"),i("#wc_cog_apply_costs_to_previous_orders").prop("disabled",!1)}).fail(function(){return i("p.applying-costs-result").html(t),i("span.applying-costs-progress").removeClass("is-active"),i("#wc_cog_apply_costs_to_previous_orders").prop("disabled",!1)})};return wc_cog_admin.existing_background_job_id&&_(wc_cog_admin.existing_background_job_id),i("button#wc_cog_apply_costs_to_previous_orders").on("click",function(s){var o,t,e,a,c,n,r=this;return s.preventDefault(),a="all-orders"===i("input[name=wc_cog_apply_costs_previous_orders]:checked").val()?wc_cog_admin.i18n.apply_costs_confirm_message_all:wc_cog_admin.i18n.apply_costs_confirm_message,!!confirm(a)&&(o=i(this).closest("fieldset"),t=o.find("span.applying-costs-progress"),e=o.find("> p"),i(this).prop("disabled",!0),t.addClass("is-active"),e.addClass("applying-costs-result").html(wc_cog_admin.i18n.apply_costs_in_progress+"<br/>"+wc_cog_admin.i18n.apply_costs_notice),n='<span class="error" style="color: #DC3232;">&#10005;</span> '+wc_cog_admin.i18n.apply_costs_error,c={action:"wc_cog_apply_costs_to_previous_orders",security:wc_cog_admin.apply_cost_of_goods_nonce,previous_orders:i("input[name=wc_cog_apply_costs_previous_orders]:checked").val()},i.post(ajaxurl,c).done(function(s){return s.success?null!=s.data.id?setTimeout(_(s.data.id),1e5):void 0:(e.html(n),t.removeClass("is-active"),i(r).prop("disabled",!1))}).fail(function(){return i(r).prop("disabled",!1),t.removeClass("is-active"),e.html(n)}))}),i("select#field_to_edit").on("variable_cost_of_good_ajax_data",function(){return{value:window.prompt(woocommerce_admin_meta_boxes_variations.i18n_enter_a_value)}}),i("#the-list").on("click",".editinline",function(s){var o,t=i(this).closest("tr").attr("id");return t=t.replace("post-",""),o=i("#wc_cog_inline_"+t).find(".cost").text(),i('input[name="_wc_cog_cost"]').val(o)}),i("#woocommerce-order-items").on("change","input.quantity",function(s){var o,t,e,a,c,n;return s.preventDefault(),c=i(this).closest("tr.item"),a=i(this).val(),e=i(this).attr("data-qty"),t=i("input.cog-total",c),o=i("input.cog-suggestion",c),n=accounting.unformat(t.attr("data-cog-total"),"."),n/=e,o.val(accounting.formatNumber(n*a,woocommerce_admin_meta_boxes.currency_format_num_decimals,"",woocommerce_admin_meta_boxes.currency_format_decimal_sep).toString())})})}).call(void 0);